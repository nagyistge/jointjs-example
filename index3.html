<!DOCTYPE html>
<html lang="en">
<head>
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="vendors/css/joint.css">
    <link rel="stylesheet" type="text/css" href="css/devs.css">
    <link rel="stylesheet" type="text/css" href="css/custom.css">

    <meta charset="UTF-8">
    <title></title>
</head>

<style type="text/css">
    #paper {
        border: 1px solid gray;
        float: left;
        position: relative;
        width: 500px;
        height: 300px;
        overflow: hidden;
    }
    #message {
        position: fixed;
        top: 310px;
        left: 250px;
    }
</style>
<body>
<div id="paper" />
<div id="message" />
<script src="vendors/js/jquery.min.js"></script>
<script src="vendors/js/lodash.min.js"></script>
<script src="vendors/js/backbone.min.js"></script>
<script src="vendors/js/joint_093.js"></script>

<script src="vendors/js/joint.shapes.devs.js"></script>

<script>
    var ClickableView = joint.dia.ElementView.extend({
        pointerdown: function () {
            this._click = true;
            joint.dia.ElementView.prototype.pointerdown.apply(this, arguments);
        },
        pointermove: function () {
            this._click = false;
            joint.dia.ElementView.prototype.pointermove.apply(this, arguments);
        },
        pointerup: function (evt, x, y) {
            if (this._click) {
                this.notify('cell:click', evt, x, y);
            } else {
                joint.dia.ElementView.prototype.pointerup.apply(this, arguments);
            }
        }
    });

    var paper = new joint.dia.Paper({
        el: $('#paper'),
        width: 500,
        height: 300,
        gridSize: 1,
        model: new joint.dia.Graph(),
        elementView: ClickableView
    });

    var r = new joint.shapes.basic.Rect({
        position: {
            x: 50,
            y: 50
        },
        size: {
            width: 120,
            height: 80
        },
        attrs: {
            text: {
                text: 'Rect'
            }
        }
    });
    var c = new joint.shapes.basic.Circle({
        position: {
            x: 250,
            y: 50
        },
        size: {
            width: 50,
            height: 50
        },
        attrs: {
            text: {
                text: 'Circle'
            }
        }
    });
    paper.model.addCells([r, c]);

    paper.on('cell:click', function () {
        $('#message').text('click!');
    });
    paper.on('cell:pointerup', function () {
        $('#message').text('pointerup!');
    });
    paper.on('blank:pointerup', function () {
        $('#message').text('blank!');
    });
</script>
</body>

</html>
